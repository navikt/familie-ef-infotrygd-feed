{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "tittel": {
      "type": "string",
      "title": "Tittel på JSON-feeden"
    },
    "inneholderFlereElementer": {
      "type": "boolean",
      "title": "Har feeden flere elementer ",
      "default": false,
      "examples": [
        true
      ]
    },
    "elementer": {
      "type": "array",
      "items": {
        "oneOf": [
          {
            "$ref": "#/definitions/vedtak"
          },
          {
            "$ref": "#/definitions/startBehandling"
          },
          {
            "$ref": "#/definitions/periode"
          }
        ]
      }
    }
  },
  "required": [
    "tittel",
    "inneholderFlereElementer",
    "elementer"
  ],
  "definitions": {
    "sekvensId": {
      "type": "integer",
      "title": "Sekvensnummer",
      "description": "Unik løpenummer for feeden. Stigende rekkefølge. Det kan være hull i rekkefølgen",
      "examples": [
        1
      ]
    },
    "fnr": {
      "type": "string",
      "pattern": "^([0-9]{11})$",
      "title": "Fnr for den som mottar stønaden"
    },
    "saksnummer": {
      "type": "integer",
      "title": "Fagsak extern id for typen og fnr"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "opprettetDato": {
          "type": "string",
          "format": "date-time",
          "title": "Tidspunkt hendelsen var opprettet i feeden",
          "examples": [
            "2018-04-18T09:03:29.202"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "opprettetDato"
      ]
    },
    "vedtak": {
      "type": "object",
      "properties": {
        "sekvensId": {
          "$ref": "#/definitions/sekvensId"
        },
        "saksnummer": {
          "$ref": "#/definitions/saksnummer"
        },
        "metadata": {
          "$ref": "#/definitions/metadata"
        },
        "type": {
          "type": "string",
          "title": "Type vedtak",
          "examples": [
            "EF_Vedtak_Skolepenger"
          ],
          "enum": [
            "EF_Vedtak_Skolepenger",
            "EF_Vedtak_OvergStoenad",
            "EF_Vedtak_Barnetilsyn"
          ]
        },
        "innhold": {
          "type": "object",
          "properties": {
            "fnr": {
              "$ref": "#/definitions/fnr"
            },
            "startdatoVedtakEF": {
              "type": "string",
              "format": "date",
              "title": "Første dato stønad utbetales fra ny løsning - kun for vedtak og ikke startBeh",
              "examples": [
                "2018-04-18"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "fnr",
            "startdatoVedtakEF"
          ]
        }
      },
      "required": [
        "sekvensId",
        "saksnummer",
        "metadata",
        "type",
        "innhold"
      ],
      "additionalProperties": false
    },
    "startBehandling": {
      "type": "object",
      "properties": {
        "sekvensId": {
          "$ref": "#/definitions/sekvensId"
        },
        "saksnummer": {
          "$ref": "#/definitions/saksnummer"
        },
        "metadata": {
          "$ref": "#/definitions/metadata"
        },
        "type": {
          "type": "string",
          "title": "Type vedtak",
          "examples": [
            "EF_StartBeh_Skolepenger"
          ],
          "enum": [
            "EF_StartBeh_Skolepenger",
            "EF_StartBeh_OvergStoenad",
            "EF_StartBeh_Barnetilsyn"
          ]
        },
        "innhold": {
          "type": "object",
          "properties": {
            "fnr": {
              "$ref": "#/definitions/fnr"
            }
          },
          "additionalProperties": false,
          "required": [
            "fnr"
          ]
        }
      },
      "required": [
        "sekvensId",
        "saksnummer",
        "metadata",
        "type",
        "innhold"
      ],
      "additionalProperties": false
    },
    "periode": {
      "type": "object",
      "properties": {
        "sekvensId": {
          "$ref": "#/definitions/sekvensId"
        },
        "saksnummer": {
          "$ref": "#/definitions/saksnummer"
        },
        "metadata": {
          "$ref": "#/definitions/metadata"
        },
        "type": {
          "type": "string",
          "title": "Type vedtak",
          "examples": [
            "EF_Periode_OvergStoenad"
          ],
          "enum": [
            "EF_Periode_OvergStoenad"
          ]
        },
        "innhold": {
          "type": "object",
          "properties": {
            "fnr": {
              "$ref": "#/definitions/fnr"
            },
            "periodestart": {
              "type": "string",
              "format": "date",
              "title": "Startdato for perioden",
              "examples": [
                "2018-04-18"
              ]
            },
            "periodeslutt": {
              "type": "string",
              "format": "date",
              "title": "Sluttdato for perioden",
              "examples": [
                "2018-04-18"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "fnr",
            "periodestart",
            "periodeslutt"
          ]
        }
      },
      "required": [
        "sekvensId",
        "saksnummer",
        "metadata",
        "type",
        "innhold"
      ],
      "additionalProperties": false
    }
  }
}
